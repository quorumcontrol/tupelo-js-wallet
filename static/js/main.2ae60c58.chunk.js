(window.webpackJsonpwallet=window.webpackJsonpwallet||[]).push([[0],{1123:function(e,t){},1125:function(e,t){},117:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return F}));var r=n(10),a=n(38),o=n(5),c=n.n(o),s=n(32),l=n(0),i=n.n(l),u=n(4),d=n(56),m=n(17),p=n(39),f=n(51);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v,O="/_wallet/username",y=e.from("_wallet-dev"),E=function(){var t=Object(s.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",m.EcdsaKey.passPhraseKey(e.from(n),y));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();!function(e){e[e.loginFormType=0]="loginFormType",e[e.passwordFormType=1]="passwordFormType",e[e.userTree=2]="userTree",e[e.registering=3]="registering",e[e.loggingIn=4]="loggingIn"}(v||(v={}));var w,h={loading:!1,username:"",password:""},j=function(e,t){var n=function(){var n=Object(s.a)(c.a.mark((function n(){var r,a,o,s,l,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(d.a)();case 2:if(r=n.sent,a=e.username){n.next=6;break}return n.abrupt("return");case 6:return console.log("actually checking: ",a),n.next=9,E(a);case 9:return o=n.sent,n.next=12,m.Tupelo.ecdsaPubkeyToDid(o.publicKey);case 12:return s=n.sent,i=void 0,n.prev=14,n.next=17,r.getTip(s);case 17:l=n.sent,n.next=23;break;case 20:n.prev=20,n.t0=n.catch(14),n.t0;case 23:void 0!==l&&(i=new m.ChainTree({store:r.blockservice,tip:l})),t({type:v.userTree,username:a,tree:i,dispatch:t}),w=void 0;case 26:case"end":return n.stop()}}),n,null,[[14,20]])})));return function(){return n.apply(this,arguments)}}();clearTimeout(w),w=setTimeout(n,150)};function T(e,t){switch(t.type){case v.loginFormType:var n=t.username;return j(e,t.dispatch),g({},e,{loading:!0,username:n});case v.userTree:var r=t;return console.log("user tree received: ",r.username," state: ",e.username),r.username!==e.username?(j(e,r.dispatch),e):g({},e,{loading:!1,userTree:t.tree});case v.passwordFormType:return g({},e,{password:t.password});case v.registering:case v.loggingIn:return g({},e,{loading:!0});default:throw new Error("unkown type: "+t.type)}}var k=function(e){return!e.loading&&e.username&&!e.userTree};function x(e){var t=e.state,n=e.onChange;return i.a.createElement(u.Form.Field,null,i.a.createElement(u.Form.Label,null,"Username"),i.a.createElement(u.Form.Control,{iconLeft:!0},i.a.createElement(u.Form.Input,{color:k(t)?"success":"info",type:"text",placeholder:"Username",value:t.username,onChange:n}),t.loading?i.a.createElement(u.Icon,{align:"left"},i.a.createElement("span",{className:"fas fa-spinner fa-pulse"})):i.a.createElement(u.Icon,{align:"left"},i.a.createElement("span",{className:"fas fa-user"}))),k(t)&&i.a.createElement(u.Form.Help,{color:"success"},"This username is available"))}function C(e){var t=e.name,n=e.value,r=e.onChange,a=e.error;return i.a.createElement(u.Form.Field,null,i.a.createElement(u.Form.Label,null,t),i.a.createElement(u.Form.Control,{iconLeft:!0},i.a.createElement(u.Form.Input,{className:a?"animated pulse faster":"",color:a?"danger":"info",type:"password",placeholder:"Password",value:n,onChange:r}),i.a.createElement(u.Icon,{align:"left"},i.a.createElement("span",{className:"fas fa-key"}))),a&&i.a.createElement(u.Form.Help,{color:"danger"},a))}function P(t){var n=t.state,a=(t.dispatch,t.onLogin),o=Object(l.useState)(""),d=Object(r.a)(o,2),p=d[0],f=d[1],b=Object(l.useState)(""),g=Object(r.a)(b,2),v=g[0],O=g[1],y=function(){var t=Object(s.a)(c.a.mark((function t(){var r,o,s,l,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n.userTree){t.next=2;break}throw new Error("must have a user tree to login");case 2:return r=n.userTree,o=n.username,t.next=6,m.EcdsaKey.passPhraseKey(e.from(p),e.from(o));case 6:return s=t.sent,t.next=9,m.Tupelo.ecdsaPubkeyToAddress(s.publicKey);case 9:return l=t.sent,t.next=12,r.resolve("tree/_tupelo/authentications");case 12:i=t.sent,i.value.includes(l)?(r.key=s,a(n.userTree)):O("invalid password");case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.a.createElement("div",null,i.a.createElement(C,{error:v,name:"Password",value:p,onChange:function(e){O(""),f(e.target.value)}}),i.a.createElement(u.Button,{onClick:y},"Login"))}function D(t){var n=t.state,a=t.dispatch,o=t.onLogin,p=Object(l.useState)(""),f=Object(r.a)(p,2),b=f[0],g=f[1],y=Object(l.useState)(""),w=Object(r.a)(y,2),h=w[0],j=w[1],T=Object(l.useState)(""),k=Object(r.a)(T,2),x=k[0],P=k[1];return i.a.createElement("div",null,i.a.createElement(C,{error:x,name:"Password",value:b,onChange:function(e){P(""),g(e.target.value)}}),i.a.createElement(C,{error:x,name:"Confirm Password",value:h,onChange:function(e){P(""),j(e.target.value)}}),i.a.createElement(u.Button,{onClick:function(){b===h?(a({type:v.registering}),function(){var t=Object(s.a)(c.a.mark((function t(){var r,a,s,l,i,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.username,t.next=3,E(r);case 3:return a=t.sent,t.next=6,m.EcdsaKey.passPhraseKey(e.from(b),e.from(r));case 6:return s=t.sent,t.next=9,m.Tupelo.ecdsaPubkeyToAddress(s.publicKey);case 9:return l=t.sent,t.next=12,Object(d.a)();case 12:return i=t.sent,t.next=15,m.ChainTree.newEmptyTree(i.blockservice,a);case 15:return u=t.sent,t.next=18,i.playTransactions(u,[Object(m.setOwnershipTransaction)([l]),Object(m.setDataTransaction)(O,r)]);case 18:u.key=s,o(u);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()):P("Passwords do not match")}},"Register"))}function F(e){var t=Object(l.useReducer)(T,h),n=Object(r.a)(t,2),a=n[0],o=n[1],c=Object(l.useState)(!1),s=Object(r.a)(c,2),d=s[0],m=s[1],b=Object(l.useContext)(f.b),g=Object(r.a)(b,2),O=(g[0],g[1]),y=function(e){O({type:f.a.login,userTree:e}),m(!0)},E=(e.location&&e.location.state?e.location.state:{from:{pathname:"/wallet"}}).from;return d?i.a.createElement(p.a,{to:E}):i.a.createElement("div",null,i.a.createElement(u.Columns,{className:"is-desktop is-centered"},i.a.createElement(u.Columns.Column,{size:"half",className:"is-centered"},i.a.createElement(u.Heading,{className:"animated flipInX fast"},"Hello."),i.a.createElement("p",null,"Find or create your wallet."))),i.a.createElement(u.Columns,{className:"is-desktop is-centered"},i.a.createElement(u.Columns.Column,{size:"half"},i.a.createElement(x,{state:a,onChange:function(e){o({type:v.loginFormType,username:e.target.value,dispatch:o})}}),a.loading&&a.username&&i.a.createElement(u.Loader,{style:{width:25,height:25}}),!a.loading&&a.username&&a.userTree&&i.a.createElement(P,{state:a,dispatch:o,onLogin:y}),!a.loading&&a.username&&!a.userTree&&i.a.createElement(D,{state:a,dispatch:o,onLogin:y}))))}}).call(this,n(1).Buffer)},1201:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(267),c=n.n(o),s=(n(501),n(10)),l=(n(502),n(503),n(4)),i=n(117),u=n(51),d=n(495),m=n(39),p=n(38),f=n(5),b=n.n(f),g=n(32);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y="/tree/_tupelo/tokens";function E(e){var t=Object(r.useState)({loading:!0,firstRun:!0,tokens:{}}),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(r.useContext)(u.b),d=Object(s.a)(i,1)[0];if(Object(r.useEffect)((function(){o.firstRun&&d.userTree&&(c(O({},o,{firstRun:!1})),p())}),[d.userTree]),!d.userTree)return a.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}});var p=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==d.userTree){e.next=2;break}throw new Error("user tree must be defined");case 2:return e.prev=2,e.next=5,d.userTree.resolve(y);case 5:t=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("e: ",e.t0),c(O({},o,{tokens:{},loading:!1}));case 12:console.log("tokens resp: ",t),c(O({},o,{tokens:t.value,loading:!1}));case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",null,o.loading?a.a.createElement(l.Loader,null):a.a.createElement(l.Table,null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"Balance"),a.a.createElement("th",null,"Max"),a.a.createElement("th",null,"Actions"))),a.a.createElement("tbody",null)))}var w=n(17),h=n(56);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){var t=e.userTree,n=Object(r.useState)({title:"",subtitle:"",content:""}),o=Object(s.a)(n,2),c=o[0],i=o[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),m=d[0],f=d[1];function v(){return(v=Object(g.a)(b.a.mark((function e(){var n,r,a,o,l,u,d,m,p,g,v,O,y,E,j,T;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c,void 0!==t.key){e.next=3;break}throw new Error("undefined userTree key");case 3:return r=w.EcdsaKey.generate(),a=Object(h.a)(),e.next=7,Promise.all([r,a]);case 7:return o=e.sent,l=Object(s.a)(o,2),u=l[0],d=l[1],m=w.ChainTree.newEmptyTree(d.blockservice,u),p=w.Tupelo.ecdsaPubkeyToAddress(t.key.publicKey),e.next=15,Promise.all([m,p]);case 15:return g=e.sent,v=Object(s.a)(g,2),O=v[0],y=v[1],e.next=21,O.id();case 21:if(null!==(E=e.sent)){e.next=24;break}throw new Error("unknown tree DID");case 24:return j=d.playTransactions(O,[Object(w.setDataTransaction)("/_wallet/attributes",{title:n.title,subtitle:n.subtitle,content:n.content}),Object(w.setOwnershipTransaction)([y])]),T=d.playTransactions(t,[Object(w.setDataTransaction)("/_wallet/nfts/"+E,Date.now())]),e.next=28,Promise.all([j,T]);case 28:i({}),f(!1);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(e){var t=e.target;i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c,Object(p.a)({},t.name,t.value)))};return a.a.createElement("div",null,a.a.createElement(l.Heading,null,"Object Creator"),a.a.createElement("p",null,"This lets you create an NFT!"),m?a.a.createElement(l.Loader,null):a.a.createElement(l.Box,{style:{marginTop:"1em"}},a.a.createElement(l.Form.Field,null,a.a.createElement(l.Form.Label,null,"Title"),a.a.createElement(l.Form.Control,null,a.a.createElement(l.Form.Input,{value:c.title,onChange:O,name:"title",placeholder:"title"}))),a.a.createElement(l.Form.Field,null,a.a.createElement(l.Form.Label,null,"Subtitle"),a.a.createElement(l.Form.Control,null,a.a.createElement(l.Form.Input,{value:c.subtitle,onChange:O,name:"subtitle",placeholder:"subtitle"}))),a.a.createElement(l.Form.Field,null,a.a.createElement(l.Form.Label,null,"Content"),a.a.createElement(l.Form.Control,null,a.a.createElement(l.Form.Input,{value:c.content,onChange:O,name:"content",placeholder:"content"}))),a.a.createElement(l.Button,{onClick:function(){f(!0),function(){v.apply(this,arguments)}()}},"Create")))}var k,x=n(494);function C(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=e.did,n=e.onSend,o=Object(r.useState)({loading:!0,tree:void 0,attrs:{},sending:!1,destination:""}),c=Object(s.a)(o,2),i=c[0],u=c[1],d=function(){var e=Object(g.a)(b.a.mark((function e(){var n,r,a,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)();case 2:return n=e.sent,e.next=5,n.getTip(t);case 5:return r=e.sent,a=new w.ChainTree({store:n.blockservice,tip:r}),e.next=9,a.resolveData("/_wallet/attributes");case 9:o=e.sent,u(D({},i,{loading:!1,tree:a,attrs:o.value||{}}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){d()}),[t]);return a.a.createElement(l.Card,null,a.a.createElement(l.Card.Header,null,a.a.createElement(l.Card.Header.Title,null,t)),a.a.createElement(l.Card.Content,null,i.loading?a.a.createElement(l.Loader,null):a.a.createElement("div",null,a.a.createElement(l.Media,null,a.a.createElement(l.Media.Item,null,a.a.createElement(l.Heading,{size:4},i.attrs.title),a.a.createElement(l.Heading,{subtitle:!0,size:6},i.attrs.subtitle))),a.a.createElement(l.Content,null,i.attrs.content))),a.a.createElement(l.Card.Footer,null,i.sending?a.a.createElement(l.Content,{style:{padding:"1em"}},a.a.createElement(l.Form.Field,null,a.a.createElement(l.Form.Label,null,"Destination Name"),a.a.createElement(l.Form.Control,null,a.a.createElement(l.Form.Input,{value:i.destination,onChange:function(e){u(D({},i,{destination:e.target.value}))},name:"nftdestination",placeholder:"Destination"}))),a.a.createElement(l.Form.Field,{kind:"group"},a.a.createElement(l.Button,{color:"primary",onClick:function(){u(D({},i,{loading:!0,sending:!1})),n({did:t,tree:i.tree,destination:i.destination})}},"Send"),a.a.createElement(l.Button,{text:!0,onClick:function(){u(D({},i,{sending:!1,destination:""}))}},"cancel"))):a.a.createElement(l.Card.Footer.Item,{onClick:function(){u(D({},i,{sending:!0}))}},"Send")))}function S(){var e=Object(r.useContext)(u.b),t=Object(s.a)(e,1)[0],n=Object(r.useState)({dids:{},addDid:"",addLoading:!1}),o=Object(s.a)(n,2),c=o[0],d=o[1],m=function(){var e=Object(g.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t.userTree){e.next=2;break}throw new Error("user tree has to be defined");case 2:return e.next=4,t.userTree.resolveData("/_wallet/nfts");case 4:n=e.sent,d(D({},c,{dids:n.value||{}}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(g.a)(b.a.mark((function e(n){var r,a,o,s,l,u,m,p,f,g;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(r=t.userTree)&&void 0!==r.key){e.next=3;break}throw new Error("can only send when a valid user");case 3:return e.next=5,Object(h.a)();case 5:return a=e.sent,e.next=8,Object(i.b)(n.destination);case 8:return o=e.sent,e.next=11,w.Tupelo.ecdsaPubkeyToDid(o.publicKey);case 11:return s=e.sent,e.next=14,a.getTip(s);case 14:return l=e.sent,u=new w.ChainTree({store:a.blockservice,tip:l}),e.next=18,u.resolve("tree/_tupelo/authentications");case 18:return m=e.sent,n.tree.key=r.key,console.log("reassigning ",n.did," to: ",s),e.next=23,a.playTransactions(n.tree,[Object(w.setOwnershipTransaction)(m.value)]);case 23:return console.log("remove did from nfts"),p=c.dids,f=n.did,p[f],g=Object(x.a)(p,[f].map(C)),e.next=27,a.playTransactions(r,[Object(w.setDataTransaction)("/_wallet/nfts",g)]);case 27:d(D({},c,{dids:g}));case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){t.userTree&&m()}),[t.userTree]);var v=Object.keys(c.dids).map((function(e){return a.a.createElement(l.Columns.Column,{key:e,size:"half"},a.a.createElement(F,{onSend:f,did:e}))}));return a.a.createElement("div",null,a.a.createElement(l.Heading,null,"Object wallet"),a.a.createElement(l.Columns,null,v),a.a.createElement(l.Box,null,c.addLoading?a.a.createElement(l.Loader,null):a.a.createElement("div",null,a.a.createElement(l.Form.Field,null,a.a.createElement(l.Form.Label,null,"Add"),a.a.createElement(l.Form.Control,null,a.a.createElement(l.Form.Input,{value:c.addDid,onChange:function(e){d(D({},c,{addDid:e.target.value}))},name:"additionalDid",placeholder:"DID"}))),a.a.createElement(l.Form.Field,{kind:"group"},a.a.createElement(l.Button,{onClick:function(){d(D({},c,{addLoading:!0}));var e=c.addDid;(function(){var n=Object(g.a)(b.a.mark((function n(){var r,a,o,s,l,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==(r=t.userTree)&&void 0!==r.key){n.next=3;break}throw new Error("user tree undfined");case 3:return n.next=5,Object(h.a)();case 5:return a=n.sent,n.next=8,a.getTip(e);case 8:return o=n.sent,s=new w.ChainTree({store:a.blockservice,tip:o}),n.next=12,w.Tupelo.ecdsaPubkeyToAddress(r.key.publicKey);case 12:return l=n.sent,n.next=15,s.resolve("tree/_tupelo/authentications");case 15:if(i=n.sent,!i.value.includes(l)){n.next=23;break}return n.next=20,a.playTransactions(r,[Object(w.setDataTransaction)("/_wallet/nfts/"+e,Date.now())]);case 20:d(D({},c,{dids:D({},c.dids,Object(p.a)({},e,Date.now())),addLoading:!1,addDid:""})),n.next=24;break;case 23:d(D({},c,{addLoading:!1,addDid:""}));case 24:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()},color:"primary"},"Add")))))}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){var t=Object(r.useState)({currentTab:k.objects}),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(r.useContext)(u.b),d=Object(s.a)(i,1)[0],f=function(e){var t=e.target.innerText.toLowerCase();c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{currentTab:k[t]}))};return d.userTree?a.a.createElement(l.Container,null,a.a.createElement(l.Heading,null,"Wallet"),a.a.createElement("h1",null,"did: ",d.userDid),a.a.createElement(l.Tabs,null,a.a.createElement(l.Tabs.Tab,{onClick:f,active:o.currentTab===k.objects},"Objects"),a.a.createElement(l.Tabs.Tab,{onClick:f,active:o.currentTab===k.tokens},"Tokens"),a.a.createElement(l.Tabs.Tab,{onClick:f,active:o.currentTab===k.creator},"Creator")),function(e){if(void 0===d.userTree)throw new Error("can't get page content without a usertree");switch(e){case k.tokens:return a.a.createElement(E,null);case k.creator:return a.a.createElement(T,{userTree:d.userTree});case k.objects:return a.a.createElement(S,null);default:throw new Error("unrecognized tab: "+e)}}(o.currentTab)):a.a.createElement(m.a,{to:{pathname:"/login",state:{from:e.location}}})}!function(e){e[e.objects=0]="objects",e[e.tokens=1]="tokens",e[e.creator=2]="creator"}(k||(k={}));var K=function(){var e=Object(r.useContext)(u.b),t=Object(s.a)(e,2),n=t[0];t[1];return n.loading>0?a.a.createElement(l.Section,null,a.a.createElement(l.Columns,{className:"is-desktop is-centered is-vcentered"},a.a.createElement(l.Loader,{style:{height:100,width:100}}))):a.a.createElement(d.a,null,a.a.createElement(m.d,null,a.a.createElement(m.b,{path:"/login"},a.a.createElement(i.a,null)),a.a.createElement(m.b,{path:"/wallet"},a.a.createElement(I,null)),a.a.createElement(m.b,null,a.a.createElement(i.a,null))))},N=function(){return a.a.createElement(u.c,null,a.a.createElement(l.Container,null,a.a.createElement(l.Navbar,{transparent:!1},a.a.createElement(l.Navbar.Brand,null,"Tupelo"))),a.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},201:function(e,t){},496:function(e,t,n){e.exports=n(1201)},501:function(e,t,n){},502:function(e,t,n){},51:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return y}));var r,a=n(5),o=n.n(a),c=n(32),s=n(10),l=n(38),i=n(0),u=n.n(i),d=n(17),m=n(56);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}if(window){var b=window.location.pathname;console.log("subDirectory ",b),"/"!==b&&(console.log("setting wasmpath to: ",b+"tupelo.wasm"),Go.setWasmPath(b+"tupelo.wasm"))}function g(e,t){switch(t.type){case r.loading:return f({},e,{loading:e.loading+1});case r.stopLoading:return f({},e,{loading:e.loading-1});case r.login:return f({},e,{userTree:t.userTree});case r.setDID:return f({},e,{userDid:t.did});default:throw new Error("unkown type: "+t.type)}}!function(e){e[e.loading=0]="loading",e[e.stopLoading=1]="stopLoading",e[e.login=2]="login",e[e.setDID=3]="setDID"}(r||(r={}));var v={loading:1},O=Object(i.createContext)([v,function(){}]),y=function(t){var n=t.children,a=Object(i.useState)(!0),l=Object(s.a)(a,2),p=l[0],f=l[1],b=Object(i.useReducer)(g,v),y=Object(s.a)(b,2),E=y[0],w=y[1];return Object(i.useEffect)((function(){if(p){f(!1);var t=sessionStorage.getItem("userDid"),n=sessionStorage.getItem("userKey");t&&n?function(){var a=Object(c.a)(o.a.mark((function a(){var c,l,i,u,p,f,b,g;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&n){a.next=2;break}throw new Error("no did or no userKey");case 2:return a.next=4,Object(m.a)();case 4:return c=a.sent,l=c.getTip(t),i=d.EcdsaKey.fromBytes(e.from(n,"base64")),a.next=9,Promise.all([l,i]);case 9:u=a.sent,p=Object(s.a)(u,2),f=p[0],b=p[1],g=new d.ChainTree({key:b,tip:f,store:c.blockservice}),console.log("logging in from storage"),w({type:r.login,userTree:g}),w({type:r.stopLoading});case 17:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()():(console.log("stopping loading"),w({type:r.stopLoading}))}!E.userDid&&E.userTree&&E.userTree.id().then((function(e){w({type:r.setDID,did:e})})),E.userTree&&E.userDid&&E.userTree.key&&E.userTree.key.privateKey&&(sessionStorage.setItem("userDid",E.userDid),sessionStorage.setItem("userKey",e.from(E.userTree.key.privateKey).toString("base64"))),console.log({newState:E})}),[E]),u.a.createElement(O.Provider,{value:[E,w]},n)}}).call(this,n(1).Buffer)},532:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=532},534:function(e,t){},536:function(e,t){},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,a=n(5),o=n.n(a),c=n(32),s=n(17),l=n(8),i=n.n(l)()("appcommunity");function u(){return i("getAppCommunity"),void 0!==r?r:r=new Promise(function(){var e=Object(c.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0="production",e.next="production"===e.t0?3:8;break;case 3:return i("using production community"),e.next=6,s.Community.getDefault();case 6:return r=e.sent,e.abrupt("break",12);case 8:return i("using development community"),e.next=11,s.Community.freshLocalTestCommunity();case 11:r=e.sent;case 12:t(r);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},569:function(e,t){},570:function(e,t){},617:function(e,t){},713:function(e,t){}},[[496,1,2]]]);
//# sourceMappingURL=main.2ae60c58.chunk.js.map